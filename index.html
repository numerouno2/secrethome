<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Love Console</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P:wght@400&display=swap');
        
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(45deg, #ff6b9d, #c44569, #f8b500, #ff6b9d);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            font-family: 'Press Start 2P', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .console {
            width: 300px;
            height: 500px;
            background: linear-gradient(145deg, #f0f0f0, #d0d0d0);
            border-radius: 20px 20px 40px 40px;
            padding: 20px;
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.3),
                inset 0 2px 4px rgba(255,255,255,0.5),
                inset 0 -2px 4px rgba(0,0,0,0.1);
            position: relative;
        }

        .brand {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .power-led {
            width: 8px;
            height: 8px;
            background: #ff69b4;
            border-radius: 50%;
            box-shadow: 0 0 10px #ff69b4;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .console-name {
            font-size: 8px;
            color: #666;
            letter-spacing: 1px;
        }

        .screen {
            width: 100%;
            height: 140px;
            background: #2d3748;
            border-radius: 8px;
            border: 4px solid #1a202c;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: screenGlow 3s infinite;
        }

        @keyframes screenGlow {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .message {
            color: #ff69b4;
            font-size: 12px;
            text-align: center;
            margin-bottom: 5px;
            text-shadow: 0 0 10px #ff69b4;
            animation: textGlow 2s ease-in-out infinite alternate;
            padding: 0 10px;
            line-height: 1.3;
        }

        @keyframes textGlow {
            from { text-shadow: 0 0 10px #ff69b4; }
            to { text-shadow: 0 0 20px #ff69b4, 0 0 30px #ff69b4; }
        }

        .subtitle {
            color: #ffd700;
            font-size: 8px;
            text-align: center;
            animation: twinkle 1.5s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .screen-info {
            position: absolute;
            bottom: 5px;
            left: 8px;
            font-size: 6px;
            color: #666;
        }

        .battery {
            position: absolute;
            bottom: 5px;
            right: 8px;
            font-size: 6px;
            color: #ff69b4;
        }

        .buttons-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 25px;
        }

        .menu-button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: 'Press Start 2P', monospace;
            font-size: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .menu-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .menu-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .message-btn { background: linear-gradient(145deg, #667eea, #764ba2); }
        .photo-btn { background: linear-gradient(145deg, #f093fb, #f5576c); }
        .date-btn { background: linear-gradient(145deg, #4facfe, #00f2fe); }
        .love-btn { background: linear-gradient(145deg, #43e97b, #38f9d7); }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .dpad {
            position: relative;
            width: 70px;
            height: 70px;
        }

        .dpad-btn {
            position: absolute;
            width: 24px;
            height: 24px;
            background: #fff;
            border: 2px solid #bbb;
            border-radius: 50%;
            box-shadow: 0 2px 6px rgba(0,0,0,0.15);
            cursor: pointer;
            transition: background 0.2s, box-shadow 0.2s;
            padding: 0;
        }

        .dpad-btn:active {
            background: #eee;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .dpad-up    { top: 0; left: 23px; }
        .dpad-down  { bottom: 0; left: 23px; }
        .dpad-left  { left: 0; top: 23px; }
        .dpad-right { right: 0; top: 23px; }
        .dpad-center {
            top: 23px;
            left: 23px;
            background: #fff;
            border: 2px solid #ff69b4;
            cursor: default;
            pointer-events: none;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            font-family: 'Press Start 2P', monospace;
            font-size: 14px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            touch-action: manipulation;
        }

        .action-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .action-btn:active {
            transform: scale(0.95);
        }

        .b-btn { background: linear-gradient(145deg, #ff6b9d, #ee5a6f); }
        .a-btn { background: linear-gradient(145deg, #ff9a9e, #fecfef); color: #333; }

        .bottom-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .bottom-btn {
            padding: 8px 18px;
            background: linear-gradient(145deg, #718096, #4a5568);
            border: none;
            border-radius: 15px;
            color: white;
            font-size: 7px;
            cursor: pointer;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
            transition: all 0.1s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .bottom-btn:active {
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.5);
            transform: translateY(1px);
        }

        .speaker-holes {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 4px;
            justify-content: center;
            align-items: center;
            width: 48px;
            margin: 0 auto 0 auto;
        }

        .hole {
            width: 6px;
            height: 6px;
            background: #888;
            border-radius: 50%;
            box-shadow: 0 1px 2px #333, 0 -1px 1px #fff;
        }

        .hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            font-size: 20px;
            color: #ff69b4;
            animation: float 6s infinite linear;
            opacity: 0.7;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.95);
            color: #ff69b4;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            display: none;
            border: 2px solid #ff69b4;
            box-shadow: 0 0 30px #ff69b4;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .photo-card {
            background: linear-gradient(145deg, #667eea, #764ba2);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #ff69b4;
        }

        .photo-card:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255,105,180,0.5);
        }

        .photo-emoji {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .photo-title {
            font-size: 8px;
            color: white;
            margin-bottom: 5px;
        }

        .photo-desc {
            font-size: 6px;
            color: #ffd700;
            line-height: 1.4;
        }

        .close-btn {
            background: #ff69b4;
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            font-family: 'Press Start 2P', monospace;
            font-size: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s;
        }

        .close-btn:hover {
            background: #ff1493;
            transform: translateY(-1px);
        }

        .tetris-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .tetris-board {
            display: grid;
            grid-template-columns: repeat(10, 18px);
            grid-template-rows: repeat(12, 18px);
            gap: 1px;
            background: #000;
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 15px;
        }

        .tetris-cell {
            width: 18px;
            height: 18px;
            background: #222;
            border: 1px solid #333;
            border-radius: 2px;
        }

        .tetris-cell.filled {
            background: linear-gradient(145deg, #ff69b4, #ff1493);
            border: 1px solid #ff1493;
            box-shadow: 0 0 5px #ff69b4;
        }

        .tetris-info {
            color: #ffd700;
            font-size: 6px;
            text-align: center;
        }

        .random-messages {
            max-height: 60vh;
            overflow-y: auto;
            padding: 10px;
        }

        .message-item {
            background: linear-gradient(145deg, #4facfe, #00f2fe);
            margin: 10px 0;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #ff69b4;
        }

        .message-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(255,105,180,0.5);
        }

        .message-text {
            font-size: 8px;
            color: white;
            line-height: 1.4;
            margin-bottom: 5px;
        }

        .message-time {
            font-size: 6px;
            color: #ffd700;
        }

        .love-rain {
            pointer-events: none;
            position: absolute;
            left: 50%;
            top: 50%;
            width: 300px;
            height: 500px;
            transform: translate(-50%, -50%);
            z-index: 10;
            overflow: visible;
            display: flex;
            justify-content: center;
            align-items: flex-start;
        }

        .love-drop {
            position: absolute;
            top: -30px;
            font-size: 28px;
            opacity: 0.85;
            animation: loveDrop 1.2s linear forwards;
            pointer-events: none;
        }

        @keyframes loveDrop {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translateY(480px) scale(1.2); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="hearts" id="hearts"></div>
    <div class="love-rain" id="loveRain"></div>
    
    <div class="console">
        <div class="brand">
            <div class="power-led"></div>
            <div class="console-name">LOVE-BOY</div>
        </div>

        <div class="screen">
            <div class="message" id="screenText">Hawooooo!</div>
            <div class="subtitle" id="screenSubtitle">Press Start Button ‚ô•</div>
            <div class="screen-info">üíï LOVE MODE ON</div>
            <div class="battery">‚ô•‚ô•‚ô•</div>
        </div>

        <div class="buttons-container">
            <button class="menu-button message-btn" onclick="showRandomMessage()">PESAN</button>
            <button class="menu-button photo-btn" onclick="showGallery()">GALERI</button>
            <button class="menu-button date-btn" onclick="showActivities()">AKTIVITAS</button>
            <button class="menu-button love-btn" onclick="playTetris()">TETRIS</button>
        </div>

        <div class="controls">
            <div class="dpad">
                <button class="dpad-btn dpad-up" onclick="dpadAction('up')">‚Üë</button>
                <button class="dpad-btn dpad-down" onclick="dpadAction('down')">‚Üì</button>
                <button class="dpad-btn dpad-left" onclick="dpadAction('left')">‚Üê</button>
                <button class="dpad-btn dpad-right" onclick="dpadAction('right')">‚Üí</button>
                <button class="dpad-btn dpad-center" disabled></button>
            </div>

            <div class="action-buttons">
                <button class="action-btn b-btn" onclick="actionB()">‚ô•</button>
                <button class="action-btn a-btn" onclick="actionA()">üòò</button>
            </div>
        </div>

        <div class="bottom-controls">
            <button class="bottom-btn" onclick="selectAction()">SELECT</button>
            <button class="bottom-btn" onclick="startLoveMode()">START</button>
        </div>

        <div class="speaker-holes">
            <div class="hole"></div><div class="hole"></div><div class="hole"></div>
            <div class="hole"></div><div class="hole"></div><div class="hole"></div>
            <div class="hole"></div><div class="hole"></div><div class="hole"></div>
            <div class="hole"></div><div class="hole"></div><div class="hole"></div>
        </div>

        <div style="margin-top: 15px; text-align: center;">
            <div style="font-size: 6px; color: #666; margin-bottom: 5px;">LOVE EDITION FOR JEAAAAAAA</div>
            <div style="font-size: 5px; color: #999;">Made with ‚ô• for my special one</div>
        </div>
    </div>

    <div class="popup" id="popup">
        <div id="popupContent"></div>
        <button class="close-btn" onclick="closePopup()">TUTUP</button>
    </div>

    <script>
        const loveMessages = [
            "Hi Cinta!! ‚ô•", "Kamu cantik banget üòç", "Wooppyuuu",
            "My Baby Gorgeous üíï", "Kangen kamu deh ü•∫", "Love you 3000 ‚ù§Ô∏è", "Kamu perfect banget",
            "Baby I Love You üíñ", "Kamu bikin aku bahagia", "Good morning sunshine ‚òÄÔ∏è", 
            "Selamat malam cinta üåô", "Thinking of you üí≠", "You're my everything üåü",
            "Miss you already üò¢", "You make me smile üòä", "You're my home üè†"
        ];

        const loveSubtitles = [
            "Press Start ‚ô•", "Always & Forever üíï", "You're My Player 2 üéÆ", "Level Up Love! ‚ú®",
            "High Score: ‚àû ‚ù§Ô∏è", "Game Over? Never! üí´", "Love Combo! üíñ", "Perfect Match! üåü",
            "Achievement Unlocked üíù", "Co-op Mode: ON üë´", "Loading Love... üíï", "Save Point: Heart üíñ",
            "New Quest: Make You Happy ‚ú®", "Status: In Apayakk?? üíò", "HP: Full of Love ‚ù§Ô∏è"
        ];

        const randomLoveMessages = [
  { text: "Banyak bintang, tetap kamu yang paling nyangkut üåå", time: "Midnight üå†" },
  { text: "Kok bisa ya ketemu orang sehappy ini? üòå", time: "Thoughts üí≠" },
  { text: "Good morning, semoga harimu seru ‚ú®", time: "Fresh Start üåû" },
  { text: "Notif dari kamu bikin mood naik ‚ö°", time: "Mood üì±" },
  { text: "Udah makan siang? Jangan kosong ya üç¥", time: "Lunch Vibes üòÅ" },
  { text: "Lagi sibuk, tapi kepikiran kamu üôà", time: "Daily Boost üîã" },
  { text: "Sore gini enak banget ngobrol bareng üåÜ", time: "Chill Mode üåá" },
  { text: "Dinner bareng kamu pasti lebih enak üòã", time: "Dinner Mood üçΩÔ∏è" },
  { text: "Good night, mimpi indah ya üåô", time: "Night Vibes üí´" },
  { text: "Ngobrol sama kamu bikin waktu ngebut ‚è≥", time: "Timeless ‚åõ" },
  { text: "Senyum kamu gampang banget nular ü§≠", time: "Sweet Fact üíï" },
  { text: "Weekend vibes + kamu = perfect ‚òï", time: "Weekend üõãÔ∏è" },
  { text: "Senja cantik, tapi tetep kalah sama kamu üåÖ", time: "Golden Hour ‚ú®" }
];

        const photoGallery = [
            { emoji: "üå∏", img: "img/foto1.png", title: "Under the Tree", desc: "Sakura aja kalah cantik kalo ada kamu di bawahnya üå∏‚ú®" },
            { emoji: "üåÖ", img: "img/foto2.png", title: "Arunika View", desc: "View Arunika emang indah‚Ä¶ tapi kamu bikin semuanya terasa jauh lebih indah lagi üåÖ‚ù§Ô∏è" },
            { emoji: "‚õ∞Ô∏è", img: "img/foto3.png", title: "Mt. CKPTW", desc: "Gunung segede ini aja masih kalah sama pikiran aku yang selalu naik ke arah kamu terus ‚õ∞Ô∏èüí≠" },
            { emoji: "üçÉ", img: "img/foto4.png", title: "Mt. Daun", desc: "Puncak tertinggi udah aku capai, tapi puncak bahagiaku sebenernya ya waktu bisa ada di samping kamu." },
            { emoji: "üëß", img: "img/foto5.png", title: "Bocil SD Squad", desc: "Bocil mode: ON üßÉ tapi tetep nggak bisa ngalahin gemesnya kamu ü•∫üíñ" },
            { emoji: "üåä", img: "img/foto6.png", title: "Waterfall Night", desc: "Suara air deras itu adem, tapi tetep kalah adem sama hati aku kalo lagi deket kamu. Nggak tau kenapa, setiap ada kamu tuh rasanya tenang banget üíô" },
            { emoji: "üåÉ", img: "img/foto7.png", title: "City Lights Date", desc: "Lampu-lampu ini boleh aja terang, tapi cukup kamu yang bikin mataku nggak bisa lepas semalaman üåôüí´" },
            { emoji: "üíß", img: "img/foto8.png", title: "Waterfall Escape", desc: "Air terjun jatuh ke bawah dengan indahnya, tapi aku jatuhnya cuma ke kamu ‚ù§Ô∏è‚Äçüî•" },
            { emoji: "üê†", img: "img/foto9.png", title: "Aquarium Date", desc: "Aquarium ini udah indah, tapi jadi lebih indah lagi waktu ada kamu di sebelahku üåäüíï" },
            { emoji: "üåô", img: "img/foto10.jpg", title: "Chill Night at Salon De Fiesta", desc: "Nggak perlu ramai, cukup Salon De Fiesta dan kamu di sebelah." },
        ];

        let currentMessageIndex = 0;
        let gameMode = 'normal';
        let tetrisBoard = [];
        let tetrisPosition = { x: 4, y: 0 };
        let tetrisScore = 0;
        let currentPiece = null;
        let gameActive = false;

        const tetrisPieces = [
            [[1,1,1,1]], // I piece
            [[1,1],[1,1]], // O piece  
            [[0,1,0],[1,1,1]], // T piece
            [[1,0,0],[1,1,1]], // L piece
            [[0,0,1],[1,1,1]], // J piece
            [[0,1,1],[1,1,0]], // S piece
            [[1,1,0],[0,1,1]]  // Z piece
        ];

        function initTetris() {
            tetrisBoard = Array(12).fill().map(() => Array(10).fill(false));
            tetrisPosition = { x: 4, y: 0 };
            tetrisScore = 0;
            gameActive = true;
            spawnNewPiece();
        }

        function spawnNewPiece() {
            currentPiece = {
                shape: tetrisPieces[Math.floor(Math.random() * tetrisPieces.length)],
                x: 4,
                y: 0
            };
        }

        function canMovePiece(newX, newY, shape = currentPiece.shape) {
            for(let y = 0; y < shape.length; y++) {
                for(let x = 0; x < shape[y].length; x++) {
                    if(shape[y][x]) {
                        const boardX = newX + x;
                        const boardY = newY + y;
                        
                        if(boardX < 0 || boardX >= 10 || boardY >= 12) return false;
                        if(boardY >= 0 && tetrisBoard[boardY][boardX]) return false;
                    }
                }
            }
            return true;
        }

        function placePiece() {
            for(let y = 0; y < currentPiece.shape.length; y++) {
                for(let x = 0; x < currentPiece.shape[y].length; x++) {
                    if(currentPiece.shape[y][x]) {
                        const boardY = currentPiece.y + y;
                        const boardX = currentPiece.x + x;
                        if(boardY >= 0) {
                            tetrisBoard[boardY][boardX] = true;
                        }
                    }
                }
            }
            
            // Check for completed lines
            let linesCleared = 0;
            for(let y = 11; y >= 0; y--) {
                if(tetrisBoard[y].every(cell => cell)) {
                    tetrisBoard.splice(y, 1);
                    tetrisBoard.unshift(Array(10).fill(false));
                    linesCleared++;
                    y++; // Check same line again
                }
            }
            
            if(linesCleared > 0) {
                tetrisScore += linesCleared * 100;
                createHeart();
            }
            
            spawnNewPiece();
        }

        function rotatePiece() {
            if(!currentPiece) return;
            
            const rotated = currentPiece.shape[0].map((_, i) => 
                currentPiece.shape.map(row => row[i]).reverse()
            );
            
            if(canMovePiece(currentPiece.x, currentPiece.y, rotated)) {
                currentPiece.shape = rotated;
            }
        }

        function renderTetris() {
            const board = document.querySelector('.tetris-board');
            if(!board) return;
            
            board.innerHTML = '';
            
            // Create display board with current piece
            let displayBoard = tetrisBoard.map(row => [...row]);
            
            // Add current piece to display
            if(currentPiece) {
                for(let y = 0; y < currentPiece.shape.length; y++) {
                    for(let x = 0; x < currentPiece.shape[y].length; x++) {
                        if(currentPiece.shape[y][x]) {
                            const boardY = currentPiece.y + y;
                            const boardX = currentPiece.x + x;
                            if(boardY >= 0 && boardY < 12 && boardX >= 0 && boardX < 10) {
                                displayBoard[boardY][boardX] = true;
                            }
                        }
                    }
                }
            }
            
            for(let i = 0; i < 12; i++) {
                for(let j = 0; j < 10; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'tetris-cell';
                    if(displayBoard[i][j]) {
                        cell.classList.add('filled');
                    }
                    board.appendChild(cell);
                }
            }
        }

        function changeMessage(direction) {
            if(gameMode === 'normal') {
                currentMessageIndex = (currentMessageIndex + direction + loveMessages.length) % loveMessages.length;
                document.getElementById('screenText').textContent = loveMessages[currentMessageIndex];
                document.getElementById('screenSubtitle').textContent = loveSubtitles[currentMessageIndex];
                createHeart();
            }
        }

        function dpadAction(direction) {
            if(gameMode === 'tetris' && currentPiece && gameActive) {
                let moved = false;
                switch(direction) {
                    case 'left':
                        if(canMovePiece(currentPiece.x - 1, currentPiece.y)) {
                            currentPiece.x--;
                            moved = true;
                        }
                        break;
                    case 'right':
                        if(canMovePiece(currentPiece.x + 1, currentPiece.y)) {
                            currentPiece.x++;
                            moved = true;
                        }
                        break;
                    case 'down':
                        if(canMovePiece(currentPiece.x, currentPiece.y + 1)) {
                            currentPiece.y++;
                            moved = true;
                        } else {
                            placePiece();
                        }
                        break;
                    case 'up':
                        rotatePiece();
                        moved = true;
                        break;
                }
                if(moved) {
                    renderTetris();
                    document.querySelector('.tetris-info').textContent = `LOVE SCORE: ${tetrisScore} ‚ô•`;
                    playBeep(400, 0.05);
                }
            } else {
                if(direction === 'up' || direction === 'right') {
                    changeMessage(1);
                } else {
                    changeMessage(-1);
                }
            }
        }

        function showRandomMessage() {
            // Show random message directly on screen
            const randomMsg = randomLoveMessages[Math.floor(Math.random() * randomLoveMessages.length)];
            document.getElementById('screenText').textContent = randomMsg.text.length > 60 ? randomMsg.text.substring(0, 60) + '...' : randomMsg.text;
            document.getElementById('screenSubtitle').textContent = randomMsg.time;
            createHeart();
            playBeep(600, 0.15);
        }

        function showActivities() {
            const activities = [
                { title: "üéÆ Gaming", desc: "Main game online bareng, co-op mode, atau competitive!" },
                { title: "üç≥ Cooking", desc: "Bikin masakan bareng via video call! Compare results!" },
                { title: "üìö Reading", desc: "Baca buku sama, diskusi chapter, sharing quotes!" },
                { title: "üéµ Music", desc: "Share playlist, karaoke online, virtual concert!" },
                { title: "üé® Creative", desc: "Drawing challenge, craft project, design together!" },
                { title: "üß© Puzzles", desc: "Online games, crosswords, brain teasers challenge!" },
                { title: "üì± Photos", desc: "Daily theme, aesthetic shots, mini photo story!" },
                { title: "üí≠ Deep Talk", desc: "Question games, dreams, future plans together!" }
            ];
            
            let content = '<div>';
            content += '<h3 style="color: #ff69b4; font-size: 12px; margin-bottom: 15px;">‚ú® Fun Activities ‚ú®</h3>';
            content += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; max-height: 50vh; overflow-y: auto;">';
            
            activities.forEach(activity => {
                content += `
                    <div style="background: linear-gradient(145deg, #4facfe, #00f2fe); padding: 12px; border-radius: 8px; cursor: pointer; transition: all 0.2s; border: 1px solid #ff69b4; text-align: center;" onclick="planActivity('${activity.title}')">
                        <div style="font-size: 10px; color: white; margin-bottom: 8px;">${activity.title}</div>
                        <div style="font-size: 6px; color: #ffd700; line-height: 1.3;">${activity.desc}</div>
                    </div>
                `;
            });
            
            content += '</div></div>';
            showPopup(content);
        }

        function planActivity(activityTitle) {
            document.getElementById('screenText').textContent = "Activity Planned! " + activityTitle.split(' ')[0];
            document.getElementById('screenSubtitle').textContent = "Let's do this! ‚ô•";
            closePopup();
            for(let i = 0; i < 8; i++) {
                setTimeout(() => createHeart(), i * 200);
            }

            // Kirim notifikasi ke Discord webhook
            const webhookUrl = 'https://discord.com/api/webhooks/1411976303019823174/I9lJmzsypm4ZXxoZ8I7yuQqz7lDJGrtr2BSdTu8cnrdWU0CySwcs1qIZQY-yhVUZpbmf';
            const payload = {
                content: `üì¢ Activity Planned: **${activityTitle}**\nLangsung dari Love Console!`
            };
            fetch(webhookUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
        }

        function actionA() {
            if(gameMode === 'tetris' && currentPiece && gameActive) {
                // Hard drop
                while(canMovePiece(currentPiece.x, currentPiece.y + 1)) {
                    currentPiece.y++;
                }
                placePiece();
                renderTetris();
                document.querySelector('.tetris-info').textContent = `LOVE SCORE: ${tetrisScore} ‚ô•`;
                createHeart();
                playBeep(200, 0.1);
            } else {
                // Kiss button - hujan love dari atas di depan Gameboy
                document.getElementById('screenText').textContent = "üíã Love Attack! üíã";
                document.getElementById('screenSubtitle').textContent = "Love Overload! ‚ô•";
                rainLove();
                playBeep(800, 0.1);
                setTimeout(() => {
                    changeMessage(0);
                }, 3000);
            }
        }

        // Tambahkan fungsi ini di bawah actionA()
        function rainLove() {
            const loveRain = document.getElementById('loveRain');
            loveRain.innerHTML = '';
            const hearts = ['üíï','üíñ','üíó','üíù','‚ù§Ô∏è','üíú','üíô','üíö','üíõ','üß°','ü§ç','üñ§','‚ô•Ô∏è','üíò','üíå'];
            for(let i=0; i<24; i++) {
                setTimeout(() => {
                    const drop = document.createElement('div');
                    drop.className = 'love-drop';
                    drop.textContent = hearts[Math.floor(Math.random()*hearts.length)];
                    drop.style.left = (Math.random() * 260 + 10) + 'px';
                    loveRain.appendChild(drop);
                    setTimeout(() => drop.remove(), 1300);
                }, i*80);
            }
        }

        function actionB() {
            if(gameMode === 'tetris' && gameActive) {
                // Rotate piece
                rotatePiece();
                renderTetris();
                playBeep(600, 0.05);
            } else {
                showLovePopup();
            }
        }

        function showRandomMessages() {
            let content = '<div class="random-messages">';
            content += '<h3 style="color: #ff69b4; font-size: 12px; margin-bottom: 20px;">üíå Random Love Messages üíå</h3>';
            
            // Show random selection of messages
            const shuffled = [...randomLoveMessages].sort(() => 0.5 - Math.random()).slice(0, 8);
            
            shuffled.forEach(msg => {
                content += `
                    <div class="message-item" onclick="selectMessage('${msg.text.replace(/'/g, "&apos;")}')">
                        <div class="message-text">${msg.text}</div>
                        <div class="message-time">${msg.time}</div>
                    </div>
                `;
            });
            
            content += '</div>';
            showPopup(content);
        }

        function selectMessage(messageText) {
            document.getElementById('screenText').textContent = messageText.substring(0, 50) + (messageText.length > 50 ? '...' : '');
            document.getElementById('screenSubtitle').textContent = "Message Selected! ‚ô•";
            closePopup();
            createHeart();
        }

        function showGallery() {
            let content = '<div>';
            content += '<h3 style="color: #ff69b4; font-size: 12px; margin-bottom: 15px;">üì∏ Our Memory Gallery üì∏</h3>';
            content += '<div class="gallery-grid">';
            photoGallery.forEach((photo, index) => {
                content += `
                    <div class="photo-card" onclick="viewPhoto(${index})">
                        ${photo.img ? `<img src="${photo.img}" alt="${photo.title}" style="width:100%;height:60px;object-fit:cover;border-radius:6px;margin-bottom:8px;">` : `<div class="photo-emoji">${photo.emoji}</div>`}
                        <div class="photo-title">${photo.title}</div>
                        <div class="photo-desc">${photo.desc.substring(0, 40)}...</div>
                    </div>
                `;
            });
            content += '</div></div>';
            showPopup(content);
        }

        function viewPhoto(index) {
            const photo = photoGallery[index];
            const content = `
                <div style="text-align: center;">
                    ${photo.img ? `<img src="${photo.img}" alt="${photo.title}" style="width:90%;max-width:220px;border-radius:10px;margin-bottom:15px;">` : `<div style="font-size:60px;margin-bottom:15px;">${photo.emoji}</div>`}
                    <h3 style="color: #ffd700; font-size: 14px; margin-bottom: 10px;">${photo.title}</h3>
                    <p style="color: #ff69b4; font-size: 8px; line-height: 1.5; max-width: 300px;">${photo.desc}</p>
                    <div style="margin-top: 15px;">
                        <button onclick="showGallery()" style="background: #4facfe; border: none; color: white; padding: 6px 12px; border-radius: 4px; font-family: 'Press Start 2P', monospace; font-size: 7px; cursor: pointer; margin-right: 10px;">BACK</button>
                        <button onclick="setAsWallpaper('${photo.emoji}', '${photo.title}', '${photo.img ? photo.img : ''}')" style="background: #43e97b; border: none; color: white; padding: 6px 12px; border-radius: 4px; font-family: 'Press Start 2P', monospace; font-size: 7px; cursor: pointer;">SET WALLPAPER</button>
                    </div>
                </div>
            `;
            showPopup(content);
        }

        function setAsWallpaper(emoji, title, img = null) {
            const message = document.getElementById('screenText');
            const subtitle = document.getElementById('screenSubtitle');
            if (img && img !== "null" && img !== "") {
                message.innerHTML = `<img src="${img}" alt="${title}" style="width:90%;max-width:180px;border-radius:10px;margin:10px auto 5px auto;display:block;">`;
            } else {
                message.innerHTML = `<div style="font-size:48px;margin-top:10px;">${emoji}</div>`;
            }
            subtitle.textContent = title;
            closePopup();
            createHeart();
        }

        function showDate() {
            const dates = [
                { title: "üé¨ Movie Night", desc: "Netflix & chill di rumah, popcorn homemade, cuddles unlimited. Perfect cozy evening together!" },
                { title: "üçï Food Adventure", desc: "Cobain restaurant baru di mall, sharing pizza, trying weird flavors, laughing at our reactions!" },
                { title: "üé® Art & Create", desc: "Pottery class atau painting session! Bikin karya seni bareng, messy but fun, plus we get souvenirs!" },
                { title: "üèñÔ∏è Beach Escape", desc: "Weekend getaway ke pantai! Sunrise watching, sand castle building, sunset dinner by the shore!" },
                { title: "üé™ Fun Carnival", desc: "Main games, naik wahana, menang boneka, cotton candy sharing. Inner child mode: ON!" },
                { title: "‚òï Cafe Hopping", desc: "Explore cute cafes around the city, try different coffee, take aesthetic photos, quality talk time!" },
                { title: "üå≥ Nature Walk", desc: "Hiking adventure atau park picnic. Fresh air, beautiful views, deep conversations, hand in hand!" },
                { title: "üéÆ Gaming Date", desc: "Arcade games atau co-op gaming di rumah. Competitive but fun, winner gets kisses from loser!" },
                { title: "üõçÔ∏è Shopping Spree", desc: "Mall adventure! Try different outfits, pick clothes for each other, fashion show di fitting room!" },
                { title: "üç∞ Baking Date", desc: "Bikin cookies atau cake bareng! Flour fight, sweet mess, sweeter results, sweetest time together!" }
            ];
            
            let content = '<div>';
            content += '<h3 style="color: #ff69b4; font-size: 12px; margin-bottom: 15px;">üíï Date Ideas for Us üíï</h3>';
            
            dates.forEach(date => {
                content += `
                    <div class="message-item" onclick="planDate('${date.title}')">
                        <div class="message-text" style="font-size: 9px; margin-bottom: 8px;">${date.title}</div>
                        <div style="font-size: 7px; color: #ffd700; line-height: 1.4;">${date.desc}</div>
                    </div>
                `;
            });
            
            content += '</div>';
            showPopup(content);
        }

        function planDate(dateTitle) {
            document.getElementById('screenText').textContent = "Date Planned! " + dateTitle.split(' ')[0];
            document.getElementById('screenSubtitle').textContent = "Can't wait! ‚ô•";
            closePopup();
            for(let i = 0; i < 8; i++) {
                setTimeout(() => createHeart(), i * 200);
            }
        }

        function playTetris() {
            gameMode = 'tetris';
            initTetris();
            
            const content = `
                <div class="tetris-container">
                    <h3 style="color: #ff69b4; font-size: 12px; margin-bottom: 10px;">üíñ LOVE TETRIS üíñ</h3>
                    <div class="tetris-board"></div>
                    <div class="tetris-info">LOVE SCORE: ${tetrisScore} ‚ô•</div>
                    <div style="font-size: 6px; color: #ffd700; margin-top: 10px; line-height: 1.4; text-align: center;">
                        D-PAD: Move & Rotate ‚ô•<br>
                        A (üòò): Hard Drop<br>
                        B (‚ô•): Rotate Piece<br>
                        Clear lines for love!
                    </div>
                    <button onclick="exitTetris()" style="background: #ff6b9d; border: none; color: white; padding: 6px 12px; border-radius: 4px; font-family: 'Press Start 2P', monospace; font-size: 7px; cursor: pointer; margin-top: 15px;">EXIT GAME</button>
                </div>
            `;
            
            showPopup(content);
            setTimeout(() => renderTetris(), 100);
        }

        function exitTetris() {
            gameMode = 'normal';
            gameActive = false;
            document.getElementById('screenText').textContent = `Final Score: ${tetrisScore}!`;
            document.getElementById('screenSubtitle').textContent = "Good Game Baby! ‚ô•";
            closePopup();
            createHeart();
        }

        // Tetris game loop
        function tetrisGameLoop() {
            if(gameMode === 'tetris' && gameActive && currentPiece && document.getElementById('popup').style.display === 'block') {
                if(canMovePiece(currentPiece.x, currentPiece.y + 1)) {
                    currentPiece.y++;
                } else {
                    placePiece();
                    
                    // Check game over
                    if(!canMovePiece(currentPiece.x, currentPiece.y)) {
                        gameActive = false;
                        document.querySelector('.tetris-info').textContent = `GAME OVER! SCORE: ${tetrisScore} ‚ô•`;
                    }
                }
                renderTetris();
                document.querySelector('.tetris-info').textContent = `LOVE SCORE: ${tetrisScore} ‚ô•`;
            }
        }

        function showLovePopup() {
            const popups = [
                "üíï ACHIEVEMENT UNLOCKED!\n'Made your girlfriend smile!'\n+1000 Love Points!",
                "‚ù§Ô∏è COMBO BONUS!\n'Love multiplier activated!'\nCuteness level: MAX!",
                "üíñ POWER UP!\n'Relationship level increased!'\nNew skill: Extra Sweetness!",
                "‚ú® SPECIAL MOVE!\n'Heart steal successful!'\nCritical hit: Love!",
                "üåü PERFECT SCORE!\n'Best boyfriend ever!'\nHigh score in my heart!",
                "üíù RARE DROP!\n'Unlimited hugs obtained!'\nLegendary item acquired!",
                "üéØ BULLSEYE!\n'Direct hit to the heart!'\nLove accuracy: 100%!",
                "üèÜ CHAMPION!\n'Winner of my heart!'\nTitle: Forever Mine!"
            ];
            showPopup(popups[Math.floor(Math.random() * popups.length)]);
        }

        function showPopup(content) {
            document.getElementById('popupContent').innerHTML = content;
            document.getElementById('popup').style.display = 'block';
            for(let i = 0; i < 5; i++) {
                setTimeout(() => createHeart(), i * 200);
            }
        }

        function closePopup() {
            document.getElementById('popup').style.display = 'none';
            gameMode = 'normal';
        }

        function createHeart() {
            const hearts = ['üíï', 'üíñ', 'üíó', 'üíù', '‚ù§Ô∏è', 'üíú', 'üíô', 'üíö', 'üíõ', 'üß°', 'ü§ç', 'üñ§', '‚ô•Ô∏è', 'üíò', 'üíå'];
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 4) + 's';
            heart.style.animationDelay = '0s'; // Remove delay for immediate effect
            
            document.getElementById('hearts').appendChild(heart);
            
            setTimeout(() => {
                if(heart.parentNode) heart.remove();
            }, 8000);
        }

        function startLoveMode() {
            document.getElementById('screenText').textContent = "Love Mode: ON üíñ";
            document.getElementById('screenSubtitle').textContent = "Player 1: You ‚ô• Player 2: Me";
            
            for(let i = 0; i < 10; i++) {
                setTimeout(() => createHeart(), i * 300);
            }
            
            setTimeout(() => {
                changeMessage(0);
            }, 3000);
            
            playBeep(600, 0.2);
        }

        function selectAction() {
            // Random surprise action
            const surprises = [
                () => {
                    document.getElementById('screenText').textContent = "Surprise Kiss! üòò";
                    document.getElementById('screenSubtitle').textContent = "Smooch delivered! ‚ô•";
                },
                () => {
                    document.getElementById('screenText').textContent = "Virtual Hug! ü§ó";
                    document.getElementById('screenSubtitle').textContent = "Warmth sent! ‚ô•";
                },
                () => {
                    document.getElementById('screenText').textContent = "Love Boost! ‚ö°";
                    document.getElementById('screenSubtitle').textContent = "Energy recharged! ‚ô•";
                },
                () => {
                    document.getElementById('screenText').textContent = "Heart Attack! üíò";
                    document.getElementById('screenSubtitle').textContent = "Critical hit! ‚ô•";
                }
            ];
            
            surprises[Math.floor(Math.random() * surprises.length)]();
            createHeart();
            playBeep(1000, 0.1);
            
            setTimeout(() => {
                changeMessage(0);
            }, 2000);
        }

        function playBeep(frequency = 800, duration = 0.1) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + duration);
            } catch(e) {
                // Fallback if audio context fails
                console.log('Beep!');
            }
        }

        // Initialize
        initTetris();

        // Tetris game loop
        setInterval(tetrisGameLoop, 800);

        // Auto-create hearts periodically
        setInterval(() => {
            if(Math.random() < 0.3) createHeart();
        }, 3000);

        // Auto-change message every 12 seconds
        setInterval(() => {
            if(document.getElementById('popup').style.display !== 'block' && gameMode === 'normal') {
                changeMessage(1);
            }
        }, 60000);

        // Close popup when clicking outside
        document.getElementById('popup').addEventListener('click', function(e) {
            if(e.target === this) {
                closePopup();
            }
        });

        // Add keyboard support for better gaming experience
        document.addEventListener('keydown', function(e) {
            if(gameMode === 'tetris') {
                switch(e.key) {
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        dpadAction('left');
                        e.preventDefault();
                        break;
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        dpadAction('right');
                        e.preventDefault();
                        break;
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                        dpadAction('down');
                        e.preventDefault();
                        break;
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                        dpadAction('up');
                        e.preventDefault();
                        break;
                    case ' ':
                        actionA();
                        e.preventDefault();
                        break;
                    case 'Enter':
                        actionB();
                        e.preventDefault();
                        break;
                }
            }
        });

        // Prevent scrolling on mobile when using D-pad
        document.addEventListener('touchmove', function(e) {
            if(gameMode === 'tetris') {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>